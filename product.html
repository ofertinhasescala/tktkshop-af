<!DOCTYPE html>
<html lang="pt-BR">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="profile" href="https://gmpg.org/xfn/11">
	<title>Miniatura Caminhão Scania - TikTok Shop</title>

	<!-- Meta tags essenciais -->
	<meta name="robots" content="max-image-preview:large">
	<meta name="description"
		content="Miniatura Realista de Controle Remoto Caminhão Scania S540 6X4 + Carreta de Brinde - Queima de Estoque">

	<!-- CSS Essenciais do sistema existente -->
	<link rel="stylesheet" id="hello-elementor-css" href="css/reset.css" media="all">
	<link rel="stylesheet" id="hello-elementor-theme-style-css" href="css/theme.css" media="all">
	<link rel="stylesheet" id="elementor-frontend-css" href="css/frontend.min.css" media="all">
	<link rel="stylesheet" id="product-selector-css" href="css/product-selector.css" media="all">
	<link rel="stylesheet" id="widget-image-css" href="css/widget-image.min.css" media="all">
	<link rel="stylesheet" id="widget-heading-css" href="css/widget-heading.min.css" media="all">
	<link rel="stylesheet" id="widget-icon-box-css" href="css/widget-icon-box.min.css" media="all">

	<!-- CSS específico da página de produto -->
	<link rel="stylesheet" href="css/product-page.css" media="all">

	<!-- Estilos críticos inline (fallback) -->
	<style id="critical-styles-inline">
		/* Estilos críticos para carregamento rápido */
		.product-page-container {
			max-width: 400px;
			margin: 0 auto;
			background-color: white;
			min-height: 100vh;
		}
		.buy-now-button {
			background: #ff4757;
			color: white;
			padding: 16px 32px;
			border-radius: 12px;
			text-decoration: none;
			font-size: 18px;
			font-weight: bold;
			display: inline-block;
			width: 100%;
			max-width: 300px;
			text-align: center;
			border: none;
			cursor: pointer;
		}
		.main-product-image {
			max-width: 140px;
			height: auto;
		}
	</style>

	<!-- Estilos globais necessários -->
	<style id="global-styles-inline-css">
		:root {
			--wp--preset--color--black: #000000;
			--wp--preset--color--white: #ffffff;
			--wp--preset--color--vivid-red: #cf2e2e;
			--wp--preset--font-size--small: 13px;
			--wp--preset--font-size--medium: 20px;
			--wp--preset--font-size--large: 36px;
		}

		body {
			margin: 0;
			padding: 0;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
			background-color: #f8f9fa;
		}

		img {
			max-width: 100%;
			height: auto;
		}
	</style>

	<!-- TikTok Pixel Code -->
	<script>
		!function (w, d, t) {
			w.TiktokAnalyticsObject = t; var ttq = w[t] = w[t] || []; ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie", "holdConsent", "revokeConsent", "grantConsent"], ttq.setAndDefer = function (t, e) { t[e] = function () { t.push([e].concat(Array.prototype.slice.call(arguments, 0))) } }; for (var i = 0; i < ttq.methods.length; i++)ttq.setAndDefer(ttq, ttq.methods[i]); ttq.instance = function (t) {
				for (
					var e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)ttq.setAndDefer(e, ttq.methods[n]); return e
			}, ttq.load = function (e, n) {
				var r = "https://analytics.tiktok.com/i18n/pixel/events.js", o = n && n.partner; ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = r, ttq._t = ttq._t || {}, ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {}; n = document.createElement("script")
					; n.type = "text/javascript", n.async = !0, n.src = r + "?sdkid=" + e + "&lib=" + t; e = document.getElementsByTagName("script")[0]; e.parentNode.insertBefore(n, e)
			};

			ttq.load('D1UGSIRC77UE05RCHN5G');
			ttq.page();
		}(window, document, 'ttq');
	</script>
</head>

<body>
	<!-- Container principal da página -->
	<div class="product-page-container">

		<!-- Header simplificado -->
		<header class="product-header">
			<!-- Header pode conter navegação ou outros elementos se necessário -->
		</header>

		<!-- Seção principal do produto -->
		<main class="product-main">

			<!-- Seção combinada: Imagem + Preço + Descrição -->
			<section class="product-hero-section">
				<div class="hero-container">
					<!-- Imagem do produto -->
					<div class="product-image-container">
						<img id="main-product-image"
							src="https://centraldacompra.shop/cdn/shop/files/ChatGPT_Image_25_de_jun._de_2025_00_24_44_1024x.png?v=1752783302"
							alt="Caminhão Azul" class="main-product-image">
					</div>

					<!-- Preço e Descrição -->
					<div class="product-info-container">
						<!-- Preços -->
						<div class="product-price-container">
							<div class="main-price">
								<span class="currency">R$</span>
								<span class="price-value">167,90</span>
								<span class="price-unit">🛒</span>
							</div>
							<div class="price-details">
								<span class="original-price">R$ 234,90</span>
								<span class="discount-badge">-55%</span>
							</div>
							<div class="shipping-info">
								<span class="shipping-text">Frete grátis</span>
							</div>
						</div>

						<!-- Título/Descrição -->
						<div class="product-title-container">
							<h1 class="product-title">
								Miniatura Realista de Controle Remoto Caminhão Scania S540 6X4 + Carreta de Brinde
								<span class="stock-badge">(QUEIMA DE ESTOQUE)</span>
							</h1>
						</div>
					</div>
				</div>
			</section>

			<!-- Seção de seleção de cor -->
			<section class="color-selection-section">
				<h2 class="selection-title">
					<span class="title-icon">🎨</span>
					Cor
				</h2>
				<div class="color-options" data-id="571a5629">
					<div class="elementor-widget elementor-widget-button" data-color="vermelho">
						<a href="#" onclick="changeProductImage('vermelho')" class="elementor-button color-button"
							data-color="vermelho">
							<span class="color-indicator color-red"></span>
							<span class="elementor-button-text">Vermelho</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button elementor-widget-active" data-color="azul">
						<a href="#" onclick="changeProductImage('azul')" class="elementor-button color-button"
							data-color="azul">
							<span class="color-indicator color-blue"></span>
							<span class="elementor-button-text">Azul</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-color="verde">
						<a href="#" onclick="changeProductImage('verde')" class="elementor-button color-button"
							data-color="verde">
							<span class="color-indicator color-green"></span>
							<span class="elementor-button-text">Verde</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-color="branco">
						<a href="#" onclick="changeProductImage('branco')" class="elementor-button color-button"
							data-color="branco">
							<span class="color-indicator color-white"></span>
							<span class="elementor-button-text">Branco</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-color="preto">
						<a href="#" onclick="changeProductImage('preto')" class="elementor-button color-button"
							data-color="preto">
							<span class="color-indicator color-black"></span>
							<span class="elementor-button-text">Preto</span>
						</a>
					</div>
				</div>
				<div class="selection-helper">
					<span class="helper-text">👆 Toque para ver o caminhão na cor selecionada</span>
				</div>
			</section>

			<!-- Seção de seleção de carreta -->
			<section class="carreta-selection-section">
				<h2 class="selection-title">
					<span class="title-icon">🚛</span>
					Carreta de brinde
				</h2>

				<!-- Preview da carreta selecionada -->
				<div class="carreta-preview" data-id="7516f890">
					<div class="preview-header">
						<span class="preview-label">Preview da carreta selecionada:</span>
					</div>
					<div class="preview-container">
						<img id="carreta-preview-image"
							src="https://centraldacompra.shop/cdn/shop/files/ChatGPT_Image_25_de_jun._de_2025_01_07_21_1024x.png?v=1752783303"
							alt="Carreta Coca Cola" class="carreta-image">
					</div>
				</div>

				<!-- Opções de carreta -->
				<div class="carreta-options" data-id="571a5630">
					<div class="elementor-widget elementor-widget-button elementor-widget-active" data-carreta="coca">
						<a href="#" onclick="changeCarretaImage('coca')" class="elementor-button carreta-button"
							data-carreta="coca">
							<span class="brand-indicator coca-brand">🥤</span>
							<span class="elementor-button-text">Coca Cola</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-carreta="sedex">
						<a href="#" onclick="changeCarretaImage('sedex')" class="elementor-button carreta-button"
							data-carreta="sedex">
							<span class="brand-indicator sedex-brand">📦</span>
							<span class="elementor-button-text">Sedex</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-carreta="heineken">
						<a href="#" onclick="changeCarretaImage('heineken')" class="elementor-button carreta-button"
							data-carreta="heineken">
							<span class="brand-indicator heineken-brand">🍺</span>
							<span class="elementor-button-text">Heineken</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-carreta="skol">
						<a href="#" onclick="changeCarretaImage('skol')" class="elementor-button carreta-button"
							data-carreta="skol">
							<span class="brand-indicator skol-brand">🍻</span>
							<span class="elementor-button-text">Skol</span>
						</a>
					</div>
					<div class="elementor-widget elementor-widget-button" data-carreta="casas">
						<a href="#" onclick="changeCarretaImage('casas')" class="elementor-button carreta-button"
							data-carreta="casas">
							<span class="brand-indicator casas-brand">🏠</span>
							<span class="elementor-button-text">Casas Bahia</span>
						</a>
					</div>
				</div>
				<div class="selection-helper">
					<span class="helper-text">🎁 Escolha sua carreta de brinde favorita</span>
				</div>
			</section>

		</main>

		<!-- Seção de ação de compra -->
		<footer class="product-footer">
			<div class="purchase-section">
				<a href="https://checkout.vendeagora.com/api/public/shopify?product=716695694693&store=7166"
					class="buy-now-button"
					target="_blank"
					rel="noopener noreferrer"
					title="Comprar Miniatura Caminhão Scania - R$ 167,90">
					<span class="button-text">Comprar Agora</span>
				</a>
				<noscript>
					<p style="text-align: center; margin-top: 10px; font-size: 12px; color: #666;">
						JavaScript desabilitado. O botão ainda funcionará, mas sem efeitos visuais.
					</p>
				</noscript>
			</div>
		</footer>

	</div>

	<!-- Scripts necessários -->
	<script src="js/jquery.min.js"></script>
	<script src="js/product-selector.js"></script>

	<!-- Script de inicialização -->
	<script>
		// Garantir que o sistema de seleção seja inicializado
		document.addEventListener('DOMContentLoaded', function () {
			// O ProductSelector já é inicializado automaticamente pelo product-selector.js
			console.log('Página de produto carregada');
			
			// Verificar se as funções globais estão disponíveis
			if (typeof changeProductImage === 'function') {
				console.log('✓ Função changeProductImage disponível');
			} else {
				console.error('✗ Função changeProductImage não encontrada');
			}
			
			if (typeof changeCarretaImage === 'function') {
				console.log('✓ Função changeCarretaImage disponível');
			} else {
				console.error('✗ Função changeCarretaImage não encontrada');
			}
			
			// Verificar se os elementos necessários existem
			const mainImage = document.getElementById('main-product-image');
			const carretaImage = document.getElementById('carreta-preview-image');
			const colorContainer = document.querySelector('[data-id="571a5629"]');
			const carretaContainer = document.querySelector('[data-id="571a5630"]');
			
			console.log('Elementos encontrados:');
			console.log('- Imagem principal:', mainImage ? '✓' : '✗');
			console.log('- Imagem carreta:', carretaImage ? '✓' : '✗');
			console.log('- Container cores:', colorContainer ? '✓' : '✗');
			console.log('- Container carretas:', carretaContainer ? '✓' : '✗');
			
			// Testar mudança de cor após 2 segundos
			setTimeout(() => {
				console.log('Testando mudança para cor vermelha...');
				if (typeof changeProductImage === 'function') {
					changeProductImage('vermelho');
				}
			}, 2000);
			
			// Testar mudança de carreta após 4 segundos
			setTimeout(() => {
				console.log('Testando mudança para carreta Sedex...');
				if (typeof changeCarretaImage === 'function') {
					changeCarretaImage('sedex');
				}
			}, 4000);
			
			// Configurar botão de compra
			setupPurchaseButton();
			
			// Testar URL de redirecionamento
			testPurchaseRedirect();
			
			// Verificar se o CSS foi carregado corretamente
			validateCSSLoading();
		});
		
		/**
		 * Valida se o CSS da página foi carregado corretamente
		 */
		function validateCSSLoading() {
			const container = document.querySelector('.product-page-container');
			if (container) {
				const styles = window.getComputedStyle(container);
				const maxWidth = styles.getPropertyValue('max-width');
				const backgroundColor = styles.getPropertyValue('background-color');
				
				if (maxWidth === '400px' && backgroundColor === 'rgb(255, 255, 255)') {
					console.log('✓ CSS da página carregado corretamente');
					console.log('- Max-width:', maxWidth);
					console.log('- Background:', backgroundColor);
				} else {
					console.warn('⚠ Possível problema no carregamento do CSS');
					console.log('- Max-width esperado: 400px, atual:', maxWidth);
					console.log('- Background esperado: rgb(255, 255, 255), atual:', backgroundColor);
				}
			} else {
				console.error('✗ Container principal não encontrado');
			}
		}
		
		/**
		 * Testa o redirecionamento do botão de compra
		 */
		function testPurchaseRedirect() {
			const buyButton = document.querySelector('.buy-now-button');
			if (buyButton) {
				const url = buyButton.getAttribute('href');
				console.log('URL de checkout configurada:', url);
				
				// Verificar se a URL é válida
				try {
					const urlObj = new URL(url);
					console.log('✓ URL válida:', {
						host: urlObj.host,
						pathname: urlObj.pathname,
						searchParams: Object.fromEntries(urlObj.searchParams)
					});
					return true;
				} catch (error) {
					console.error('✗ URL inválida:', error);
					return false;
				}
			}
			return false;
		}
		
		/**
		 * Configura o comportamento do botão de compra
		 */
		function setupPurchaseButton() {
			const buyButton = document.querySelector('.buy-now-button');
			if (!buyButton) {
				console.error('Botão de compra não encontrado');
				return;
			}
			
			console.log('✓ Botão de compra configurado');
			
			// Adicionar evento de clique para feedback visual
			buyButton.addEventListener('click', function(e) {
				// Adicionar classe de loading
				this.classList.add('purchasing');
				this.style.pointerEvents = 'none';
				
				// Alterar texto temporariamente
				const buttonText = this.querySelector('.button-text');
				const originalText = buttonText.textContent;
				buttonText.textContent = 'Redirecionando...';
				
				// Adicionar efeito de pulse
				this.style.animation = 'pulse 0.5s ease-in-out';
				
				// Validar URL antes do redirecionamento
				const url = this.getAttribute('href');
				if (!url || !url.includes('checkout.vendeagora.com')) {
					e.preventDefault();
					console.error('URL de checkout inválida:', url);
					
					// Restaurar estado original
					this.classList.remove('purchasing');
					this.style.pointerEvents = 'auto';
					buttonText.textContent = originalText;
					this.style.animation = '';
					
					alert('Erro: Link de checkout inválido. Tente novamente.');
					return false;
				}
				
				// Log para analytics
				console.log('Redirecionando para checkout:', url);
				
				// Enviar evento para TikTok Pixel se disponível
				if (typeof ttq !== 'undefined') {
					try {
						ttq.track('InitiateCheckout', {
							content_type: 'product',
							content_id: '716695694693',
							value: 167.90,
							currency: 'BRL'
						});
						console.log('✓ Evento TikTok Pixel enviado');
					} catch (error) {
						console.warn('Erro ao enviar evento TikTok:', error);
					}
				}
				
				// Permitir redirecionamento após pequeno delay para feedback visual
				setTimeout(() => {
					// O redirecionamento acontece naturalmente pelo href
					// A URL é fixa e não depende das seleções do usuário
					console.log('Redirecionamento iniciado para:', url);
					console.log('Seleções atuais (apenas para log):');
					if (typeof productSelector !== 'undefined' && productSelector) {
						const state = productSelector.stateManager.getState();
						console.log('- Cor selecionada:', state.selectedColor);
						console.log('- Carreta selecionada:', state.selectedCarreta);
					}
				}, 500);
			});
			
			// Adicionar evento de hover para feedback adicional
			buyButton.addEventListener('mouseenter', function() {
				this.style.transform = 'translateY(-2px) scale(1.02)';
			});
			
			buyButton.addEventListener('mouseleave', function() {
				if (!this.classList.contains('purchasing')) {
					this.style.transform = '';
				}
			});
			
			// Adicionar suporte para touch em dispositivos móveis
			buyButton.addEventListener('touchstart', function() {
				this.style.transform = 'translateY(-1px) scale(1.01)';
			});
			
			buyButton.addEventListener('touchend', function() {
				if (!this.classList.contains('purchasing')) {
					this.style.transform = '';
				}
			});
		}
	</script>

</body>

</html>